{
    "sourceFile": "src/components/Login/index.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1644742979457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1644765181515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n   },\r\n   created(){\r\n    \r\n   },\r\n-  moun\r\n+  mounted\r\n }\r\n </script>\r\n \r\n <style  scoped lang=\"less\">\r\n"
                },
                {
                    "date": 1644765243653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     onReset(formName) {\r\n       this.$refs[formName].resetFields()\r\n     },\r\n     goHome(){\r\n-      if(win){\r\n+      if(wind){\r\n \r\n       }\r\n     }\r\n     \r\n"
                }
            ],
            "date": 1644742979457,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"page\">\r\n    <div class=\"login-container\">\r\n      <div class=\"log\">\r\n        <img src=\"../../assets/images/logo.png\" alt=\"图片错误\" />\r\n      </div>\r\n      <el-form\r\n        ref=\"loginForm\"\r\n        :model=\"loginForm\"\r\n        label-width=\"0px\"\r\n        :rules=\"loginRules\"\r\n        class=\"login_form\"\r\n      >\r\n        <el-form-item prop=\"username\">\r\n          <el-input v-model=\"loginForm.username\" placeholder=\"请输入用户名称\"\r\n            ><i slot=\"prefix\" class=\"iconfont icon-user\"></i\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input\r\n            v-model=\"loginForm.password\"\r\n            show-password\r\n            placeholder=\"请输入密码\"\r\n            :validate-event=\"false\"\r\n            ><i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-row type=\"flex\" justify=\"end\">\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"onSubmit('loginForm')\"\r\n              size=\"small\"\r\n              :loading=\"isLogin\"\r\n              >登录</el-button\r\n            >\r\n            <el-button\r\n              type=\"info\"\r\n              @click=\"onReset('loginForm')\"\r\n              size=\"small\"\r\n              :loading=\"isLogin\"\r\n              >重置</el-button\r\n            >\r\n          </el-row>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'))\r\n      } else if (!/^[\\w_]{6,16}$/.test(value)) {\r\n        callback(new Error('密码需为6-16位的数字大小写字母或下划线'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      loginForm: {\r\n        username: 'admin',\r\n        password: '123456'\r\n      },\r\n      loginRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名称', trigger: 'blur' },\r\n          { min: 1, max: 8, message: '长度在 1 到 8 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [{ validator: validatePass }]\r\n      },\r\n      isLogin: false\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit(formName) {\r\n      this.isLogin = true\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$api.login.goLogin(this.loginForm).then((res) => {\r\n            if (res.meta.status === 200) {\r\n              window.sessionStorage.setItem('token', res.data.token)\r\n              this.$message.success(res.meta.msg)\r\n              setTimeout(() => {\r\n                this.isLogin = false\r\n\r\n                this.$router.push('/home')\r\n              }, 0)\r\n            } else {\r\n              this.isLogin = false\r\n              this.$message.error(res.meta.msg)\r\n            }\r\n          })\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    onReset(formName) {\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    \r\n  },\r\n  created(){\r\n   \r\n  }\r\n}\r\n</script>\r\n\r\n<style  scoped lang=\"less\">\r\n.page {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #2b4b6b;\r\n  .login-container {\r\n    position: relative;\r\n    width: 450px;\r\n    height: 300px;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n  }\r\n}\r\n.log {\r\n  height: 130px;\r\n  width: 130px;\r\n  border: 1px solid #eee;\r\n  border-radius: 50%;\r\n  padding: 10px;\r\n  box-shadow: 0 0 10px #ddd;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: #fff;\r\n  img {\r\n    height: 100%;\r\n    width: 100%;\r\n    border-radius: 50%;\r\n    background-color: #eee;\r\n  }\r\n}\r\n.login_form {\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n  padding: 0 20px;\r\n  box-sizing: border-box;\r\n}\r\n</style>\r\n"
        }
    ]
}