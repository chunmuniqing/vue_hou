(window.webpackJsonp=window.webpackJsonp||[]).push([["goods"],{"09d3":function(t,e,a){},2012:function(t,e,a){"use strict";a("c134")},"5bcc":function(t,e,a){"use strict";a.r(e);var o=a("2877"),r=Object(o.a)({name:"detail",props:["id"],mounted:function(){},watch:{$route:function(t){}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",[a("li",[t._v("名字:"+t._s(t.id))])])])}),[],!1,null,"2f333a6e",null);e.default=r.exports},"6e83":function(t,e,a){"use strict";a.r(e),a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("c740"),a("a434"),a("a15b");var o=a("60bb"),r=a.n(o),s={name:"Add",data:function(){return{activeIndex:0,addItemRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_cat:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},cateProps:{label:"cat_name",value:"cat_id",children:"children",expandTrigger:"hover"},addItemForm:{goods_name:"",goods_price:null,goods_weight:null,goods_number:null,goods_cat:[],goods_introduce:"",pics:[],attrs:[]},categoriesData:[],manyTableData:[],onlyTableData:[],uploadUrl:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},preView:"",dialogVisible:!1}},methods:{categoriesList:function(){var t=this;this.$api.shop.goCategoriesList().then((function(e){t.$fn.error&&(t.categoriesData=e.data)}))},selectGoods:function(t){},beforeSwitchTab:function(t,e){if("0"===e&&3!==this.addItemForm.goods_cat.length)return this.$message.error("您有商品分类未选择"),!1},attributesList:function(t){var e=this;this.$api.shop.getAttributes({id:this.cateId,sel:t}).then((function(a){e.$fn.error&&("many"===t?(a.data.forEach((function(t){t.attr_vals=0===t.attr_vals.length?[]:t.attr_vals.split(",")})),e.manyTableData=a.data):e.onlyTableData=a.data)}))},selectTab:function(){"1"===this.activeIndex?this.attributesList("many"):"2"===this.activeIndex&&this.attributesList("only")},handlePreview:function(t){this.preView=t.response.data.url,this.dialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.addItemForm.pics.findIndex((function(t){return t.pic===e}));this.addItemForm.pics.splice(a,1)},successPic:function(t){var e={pic:t.data.tmp_path};this.addItemForm.pics.push(e)},add:function(){var t=this;this.$refs.addItemForm.validate((function(e){if(!e)return t.$message.error("请填写必要的表单项!");var a=r.a.cloneDeep(t.addItemForm);a.goods_cat=a.goods_cat.join(","),t.manyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals.join(",")};t.addItemForm.attrs.push(a)})),t.onlyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addItemForm.attrs.push(a)})),a.attrs=t.addItemForm.attrs,t.$api.shop.getAddGoods(a).then((function(e){if(201!==e.meta.status)return t.$message.error(e.meta.msg);t.$message.success("添加商品成功!"),t.$router.push("/goods")}))}))}},mounted:function(){this.categoriesList()},computed:{cateId:function(){return 3===this.addItemForm.goods_cat.length?this.addItemForm.goods_cat[2]:null}}},i=(a("d594"),a("2877")),n=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods/add"}}},[t._v("商品分类")])],1),a("el-card",[a("el-alert",{attrs:{closable:!1,center:"","show-icon":"",title:"添加商品信息",type:"info"}}),a("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addItemForm",attrs:{model:t.addItemForm,rules:t.addItemRules,"label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeSwitchTab},on:{"tab-click":t.selectTab},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addItemForm.goods_name,callback:function(e){t.$set(t.addItemForm,"goods_name",e)},expression:"addItemForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addItemForm.goods_price,callback:function(e){t.$set(t.addItemForm,"goods_price",e)},expression:"addItemForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addItemForm.goods_weight,callback:function(e){t.$set(t.addItemForm,"goods_weight",e)},expression:"addItemForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addItemForm.goods_number,callback:function(e){t.$set(t.addItemForm,"goods_number",e)},expression:"addItemForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:t.categoriesData,clearable:"",props:{label:"cat_name",value:"cat_id",children:"children"}},on:{change:t.selectGoods},model:{value:t.addItemForm.goods_cat,callback:function(e){t.$set(t.addItemForm,"goods_cat",e)},expression:"addItemForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:"",size:"small"}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{action:t.uploadUrl,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture",headers:t.headerObj,"on-success":t.successPic}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:t.addItemForm.goods_introduce,callback:function(e){t.$set(t.addItemForm,"goods_introduce",e)},expression:"addItemForm.goods_introduce"}}),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.add}},[t._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticClass:"previewImg",attrs:{src:t.preView,alt:"图片预览错误"}})])],1)}),[],!1,null,"a3c6d75a",null);e.default=n.exports},af60:function(t,e,a){"use strict";a.r(e);var o=(a("d70d"),a("2877")),r=Object(o.a)({name:"Goods",methods:{addCommodity:function(){this.$router.push({name:"add"})}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods/add",exact:"true"}}},[t._v("商品分类")])],1),a("el-button",{attrs:{type:"primary"},on:{click:t.addCommodity}},[t._v("添加商品")]),a("router-link",{attrs:{to:"/goods/home","active-class":"active"}},[t._v("home")]),a("router-link",{attrs:{to:"/goods/about","active-class":"active"}},[t._v("about")]),a("keep-alive",{attrs:{exclude:"Add"}},[a("router-view")],1)],1)}),[],!1,null,"153a532c",null);e.default=r.exports},b048:function(t,e,a){"use strict";a.r(e);var o={name:"home",beforeDestroy:function(){},mounted:function(){window.homeRoute=this.$route,window.homeRouter=this.$router}},r=(a("2012"),a("2877")),s=Object(r.a)(o,(function(){var t=this;t.$createElement;return t._self._c,t._m(0)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",[a("li",[t._v("1")]),a("li",[t._v("2")]),a("li",[t._v("3")]),a("li",[t._v("4")]),a("li",[t._v("5")])])])}],!1,null,"76a950f2",null);e.default=s.exports},b626:function(t,e,a){},c134:function(t,e,a){},d594:function(t,e,a){"use strict";a("09d3")},d70d:function(t,e,a){"use strict";a("b626")},dbbe:function(t,e,a){"use strict";a.r(e);var o=a("2877"),r={name:"about",data:function(){return{}},beforeDestroy:function(){},mounted:function(){window.aboutRoute=this.$route,window.aboutRouter=this.$router},components:{Message:Object(o.a)({name:"message",data:function(){return{mes:[{id:1,name:"zhangsan",context:"打篮球"},{id:2,name:"你是",context:"乒乓球"},{id:3,name:"王五",context:"踢足球"}]}},methods:{tui:function(){this.$router.push({path:"/goods/home",query:{id:"我是从home传过来的"}})},qian:function(){}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{on:{click:t.tui}},[t._v("后退")]),a("el-button",{on:{click:t.qian}},[t._v("前进")]),a("ul",t._l(t.mes,(function(e){return a("li",{key:e.id},[a("router-link",{attrs:{to:{name:"detail",query:{name:e.name}},replace:""}},[t._v(t._s(e.name))]),t._v(" ---"+t._s(e.context))],1)})),0),a("router-view")],1)}),[],!1,null,"d311b892",null).exports},methods:{}},s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("about")]),a("Message"),a("h3",[t._v(t._s(t._f("dateFormat")(Date.parse(new Date))))])],1)}),[],!1,null,"3c21c201",null);e.default=s.exports}}]);